!function(m){m.jgrid.extend({setColumns:function(h){return h=m.extend({top:0,left:0,width:200,height:"auto",dataheight:"auto",modal:!1,drag:!0,beforeShowForm:null,afterShowForm:null,afterSubmitForm:null,closeOnEscape:!0,ShrinkToFit:!1,jqModal:!1,saveicon:[!0,"left","ui-icon-disk"],closeicon:[!0,"left","ui-icon-close"],onClose:null,colnameview:!0,closeAfterSubmit:!0,updateAfterCheck:!1,recreateForm:!1},m.jgrid.col,h||{}),this.each(function(){var e=this;if(e.grid){var t="function"==typeof h.beforeShowForm,o="function"==typeof h.afterShowForm,l="function"==typeof h.afterSubmitForm,a=e.p.id,d="ColTbl_"+a,r={themodal:"colmod"+a,modalhead:"colhd"+a,modalcontent:"colcnt"+a,scrollelm:d};if(!0===h.recreateForm&&null!=m("#"+r.themodal).html()&&m("#"+r.themodal).remove(),null!=m("#"+r.themodal).html())t&&h.beforeShowForm(m("#"+d)),m.jgrid.viewModal("#"+r.themodal,{gbox:"#gbox_"+a,jqm:h.jqModal,jqM:!1,modal:h.modal}),o&&h.afterShowForm(m("#"+d));else{var c=isNaN(h.dataheight)?h.dataheight:h.dataheight+"px",n="<div id='"+d+"' class='formdata' style='width:100%;overflow:auto;position:relative;height:"+c+";'>";for(n+="<table class='ColTable' cellspacing='1' cellpading='2' border='0'><tbody>",i=0;i<this.p.colNames.length;i++)e.p.colModel[i].hidedlg||(n+="<tr><td style='white-space: pre;'><input type='checkbox' style='margin-right:5px;' id='col_"+this.p.colModel[i].name+"' class='cbox' value='T' "+(!1===this.p.colModel[i].hidden?"checked":"")+"/><label for='col_"+this.p.colModel[i].name+"'>"+this.p.colNames[i]+(h.colnameview?" ("+this.p.colModel[i].name+")":"")+"</label></td></tr>");n+="</tbody></table></div>";var s=h.updateAfterCheck?"":"<a href='javascript:void(0)' id='dData' class='fm-button ui-state-default ui-corner-all'>"+h.bSubmit+"</a>",c="<a href='javascript:void(0)' id='eData' class='fm-button ui-state-default ui-corner-all'>"+h.bCancel+"</a>";n+="<table border='0' class='EditTable' id='"+d+"_2'><tbody><tr style='display:block;height:3px;'><td></td></tr><tr><td class='DataTD ui-widget-content'></td></tr><tr><td class='ColButton EditButton'>"+s+"&#160;"+c+"</td></tr></tbody></table>",h.gbox="#gbox_"+a,m.jgrid.createModal(r,n,h,"#gview_"+e.p.id,m("#gview_"+e.p.id)[0]),1==h.saveicon[0]&&m("#dData","#"+d+"_2").addClass("right"==h.saveicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+h.saveicon[2]+"'></span>"),1==h.closeicon[0]&&m("#eData","#"+d+"_2").addClass("right"==h.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+h.closeicon[2]+"'></span>"),h.updateAfterCheck?m(":input","#"+d).click(function(t){var o=this.id.substr(4);return o&&(this.checked?m(e).jqGrid("showCol",o):m(e).jqGrid("hideCol",o),!0===h.ShrinkToFit&&m(e).jqGrid("setGridWidth",e.grid.width-.001,!0)),this}):m("#dData","#"+d+"_2").click(function(t){for(i=0;i<e.p.colModel.length;i++){var o;e.p.colModel[i].hidedlg||(o=e.p.colModel[i].name.replace(/\./g,"\\."),m("#col_"+o,"#"+d).attr("checked")?(m(e).jqGrid("showCol",e.p.colModel[i].name),m("#col_"+o,"#"+d).attr("defaultChecked",!0)):(m(e).jqGrid("hideCol",e.p.colModel[i].name),m("#col_"+o,"#"+d).attr("defaultChecked","")))}return!0===h.ShrinkToFit&&m(e).jqGrid("setGridWidth",e.grid.width-.001,!0),h.closeAfterSubmit&&m.jgrid.hideModal("#"+r.themodal,{gb:"#gbox_"+a,jqm:h.jqModal,onClose:h.onClose}),l&&h.afterSubmitForm(m("#"+d)),!1}),m("#eData","#"+d+"_2").click(function(t){return m.jgrid.hideModal("#"+r.themodal,{gb:"#gbox_"+a,jqm:h.jqModal,onClose:h.onClose}),!1}),m("#dData, #eData","#"+d+"_2").hover(function(){m(this).addClass("ui-state-hover")},function(){m(this).removeClass("ui-state-hover")}),t&&h.beforeShowForm(m("#"+d)),m.jgrid.viewModal("#"+r.themodal,{gbox:"#gbox_"+a,jqm:h.jqModal,jqM:!0,modal:h.modal}),o&&h.afterShowForm(m("#"+d))}}})}})}(jQuery);